<p id="notice"><%= notice %></p>
<h1><%= @player.name %></h1>
<table class="table table-striped table-bordered">
  <thead>
    <tr>
      <th class="span2">Wins</th>
      <th class="span2">Losses</th>
      <th class="span2">Points For</th>
      <th class="span2">Points Against</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="center"><%= @player.win_count %></td>
      <td class="center"><%= @player.results.count(:conditions => {:winner => false}) %></td>
      <td class="center"><%= @player.points_for %></td>
      <td class="center"><%= @player.points_against %></td>
    </tr>
  </tbody>
</table>

<% @games.each do |game| %>
  <% if game.created_at.strftime("%m/%d/%Y") != @date %>
    <% @date = game.created_at.strftime("%m/%d/%Y") %>
    <h2><%= @date %></h2>
  <% end %>
  <table class="table table-striped table-bordered">
    <% game.players.each do |player|%>
      <tr>
        <% result = player.results.first(:conditions => { :game_id => game.id }) %>
        <% if result.winner %>
          <td class="span8 winner">
        <% else %>
          <td class="span8">
        <% end %>
        <%= link_to player.name, player %></td>
        <% result = player.results.first(:conditions => { :game_id => game.id }) %>
        <% if result.winner %>
          <td class="span2 winner">
        <% else %>
          <td class="span2">
        <% end %>
        <%= result.score %></td>     
      </tr>
    <% end %>
  </table>
<% end %>

<%= link_to 'Edit', edit_player_path(@player) %> |
<%= link_to 'Destroy', @player, method: :delete, data: { confirm: 'Are you sure?' } %> | 
<%= link_to 'Back', players_path %>
